<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <link href="../static/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="../static/data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="../static/files/register/styles.css" type="text/css" rel="stylesheet"/>
    <script src="../static/scripts/jquery-3.2.1.min.js"></script>
    <script src="../static/scripts/axure/axQuery.js"></script>
    <script src="../static/scripts/axure/globals.js"></script>
    <script src="../static/scripts/axutils.js"></script>
    <script src="../static/scripts/axure/annotation.js"></script>
    <script src="../static/scripts/axure/axQuery.std.js"></script>
    <script src="../static/scripts/axure/doc.js"></script>
    <script src="../static/scripts/messagecenter.js"></script>
    <script src="../static/scripts/axure/events.js"></script>
    <script src="../static/scripts/axure/recording.js"></script>
    <script src="../static/scripts/axure/action.js"></script>
    <script src="../static/scripts/axure/expr.js"></script>
    <script src="../static/scripts/axure/geometry.js"></script>
    <script src="../static/scripts/axure/flyout.js"></script>
    <script src="../static/scripts/axure/model.js"></script>
    <script src="../static/scripts/axure/repeater.js"></script>
    <script src="../static/scripts/axure/sto.js"></script>
    <script src="../static/scripts/axure/utils.temp.js"></script>
    <script src="../static/scripts/axure/variables.js"></script>
    <script src="../static/scripts/axure/drag.js"></script>
    <script src="../static/scripts/axure/move.js"></script>
    <script src="../static/scripts/axure/visibility.js"></script>
    <script src="../static/scripts/axure/style.js"></script>
    <script src="../static/scripts/axure/adaptive.js"></script>
    <script src="../static/scripts/axure/tree.js"></script>
    <script src="../static/scripts/axure/init.temp.js"></script>
    <script src="../static/scripts/axure/legacy.js"></script>
    <script src="../static/scripts/axure/viewer.js"></script>
    <script src="../static/scripts/axure/math.js"></script>
    <script src="../static/scripts/axure/jquery.nicescroll.min.js"></script>
    <script src="../static/data/document.js"></script>
    <script src="../static/files/register/data.js"></script>

</head>
<body>
<div id="register" class="">

    <!-- Unnamed (Image) -->
    <div id="u97" class="ax_default image">
        <img id="u97_img" class="img " src="images/register/u97.png"/>
        <div id="u97_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u98" class="ax_default shape">
        <div id="u98_div" class=""></div>
        <div id="u98_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u99" class="ax_default box_1">
        <div id="u99_div" class=""></div>
        <div id="u99_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Image) -->
    <div id="u100" class="ax_default image">
        <img id="u100_img" class="img " src="images/main/u3.png"/>
        <div id="u100_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Text Field) -->
    <div id="u101" class="ax_default text_field">
        <img id="u101_img" class="img " src="images/login/u82.svg"/>
        <input id="u101_input" type="text" value="注册并开始学习吧！" class="u101_input"/>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u102" class="ax_default shape">
        <div id="u102_div" class=""></div>
        <div id="u102_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u103" class="ax_default shape">
        <div id="u103_div" class=""></div>
        <div id="u103_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- emphone (Text Field) -->
    <div id="u104" class="ax_default text_field" data-label="emphone">
        <img id="u104_img" class="img " src="images/register/emphone_u104.svg"/>
        <input v-model="userEmail" id="u104_input" type="text" placeholder="电子邮件" class="u104_input"/>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u105" class="ax_default icon">
        <img id="u105_img" class="img " src="images/register/u105.svg"/>
        <div id="u105_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u106" class="ax_default shape">
        <div id="u106_div" class=""></div>
        <div id="u106_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- pwd (Text Field) -->
    <div id="u107" class="ax_default text_field" data-label="pwd">
        <img id="u107_img" class="img " src="images/register/emphone_u104.svg"/>
        <input v-model="userPassword" id="u107_input" type="text" placeholder="密码" class="u107_input"/>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u108" class="ax_default icon">
        <img id="u108_img" class="img " src="images/register/u108.svg"/>
        <div id="u108_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u109" class="ax_default shape">
        <div id="u109_div" class=""></div>
        <div id="u109_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- stuID (Text Field) -->
    <div id="u110" class="ax_default text_field" data-label="stuID">
        <img id="u110_img" class="img " src="images/register/emphone_u104.svg"/>
        <input v-model="userNumber" id="u110_input" type="text" placeholder="学号" class="u110_input"/>
    </div>

    <!-- 注册 (Rectangle) -->
    <div id="u111" class="ax_default link_button" data-label="注册">
        <div id="u111_div" class=""></div>
        <div id="u111_text" class="text ">
            <p><span @click="do_register">注 册</span></p>
        </div>
    </div>

    <!-- Unnamed (Text Field) -->
    <div id="u112" class="ax_default text_field">
        <img id="u112_img" class="img " src="images/register/u112.svg"/>
        <input id="u112_input" type="text" value="已有账户？" class="u112_input"/>
    </div>

    <!-- 登录-link (Text Field) -->
    <div id="u113" class="ax_default text_field" data-label="login-link">
        <img id="u113_img" class="img " src="images/login/__-link_u93.svg"/>
        <input id="u113_input" type="text" value="返回登录" class="u113_input"/>
    </div>

    <!-- close (Shape) -->
    <div id="u114" class="ax_default icon" data-label="close">
        <img id="u114_img" class="img " src="images/login/close_u94.svg"/>
        <div id="u114_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u115" class="ax_default shape">
        <div id="u115_div" class=""></div>
        <div id="u115_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- username (Text Field) -->
    <div id="u116" class="ax_default text_field" data-label="username">
        <img id="u116_img" class="img " src="images/register/emphone_u104.svg"/>
        <input v-model="userNickname" id="u116_input" type="text" placeholder="昵称" class="u116_input"/>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u117" class="ax_default icon">
        <img id="u117_img" class="img " src="images/register/u117.svg"/>
        <div id="u117_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u118" class="ax_default shape">
        <div id="u118_div" class=""></div>
        <div id="u118_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- schoolname (Text Field) -->
    <div id="u119" class="ax_default text_field" data-label="schoolname">
        <img id="u119_img" class="img " src="images/register/emphone_u104.svg"/>
        <input v-model="schoolId" id="u119_input" type="text" placeholder="学校ID" class="u119_input"/>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u120" class="ax_default icon">
        <img id="u120_img" class="img " src="images/register/u120.svg"/>
        <div id="u120_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u121" class="ax_default shape">
        <div id="u121_div" class=""></div>
        <div id="u121_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- username (Text Field) -->
    <div id="u122" class="ax_default text_field" data-label="username">
        <img id="u122_img" class="img " src="images/register/emphone_u104.svg"/>
        <input v-model="userGender" id="u122_input" type="text" placeholder="性别" class="u122_input"/>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u123" class="ax_default icon">
        <img id="u123_img" class="img " src="images/register/u123.svg"/>
        <div id="u123_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u124" class="ax_default shape">
        <div id="u124_div" class=""></div>
        <div id="u124_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- emphone (Text Field) -->
    <div id="u125" class="ax_default text_field" data-label="emphone">
        <img id="u125_img" class="img " src="images/register/emphone_u104.svg"/>
        <input v-model="userPhone" id="u125_input" type="text" placeholder="电话号码" class="u125_input"/>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u126" class="ax_default shape">
        <div id="u126_div" class=""></div>
        <div id="u126_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u127" class="ax_default icon">
        <img id="u127_img" class="img " src="images/register/u127.svg"/>
        <div id="u127_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Droplist) -->
    <div id="u128" class="ax_default droplist">
        <img id="u128_img" class="img " src="images/register/u128.svg"/>
        <select v-model="userRole" id="u128_input" class="u128_input">
            <option v-for="option in options" :value="option.value">{{option.text}}</option>
        </select>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u129" class="ax_default icon">
        <img id="u129_img" class="img " src="images/register/u129.svg"/>
        <div id="u129_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Rectangle) -->
    <div id="u130" class="ax_default shape">
        <div id="u130_div" class=""></div>
        <div id="u130_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- stuID (Text Field) -->
    <div id="u131" class="ax_default text_field" data-label="stuID">
        <img id="u131_img" class="img " src="images/register/emphone_u104.svg"/>
        <input v-model="userName" id="u131_input" type="text" placeholder="姓名" class="u131_input"/>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u132" class="ax_default icon">
        <img id="u132_img" class="img " src="images/register/u132.svg"/>
        <div id="u132_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>

    <!-- Unnamed (Shape) -->
    <div id="u133" class="ax_default icon">
        <img id="u133_img" class="img " src="images/register/u133.svg"/>
        <div id="u133_text" class="text " style="display:none; visibility: hidden">
            <p></p>
        </div>
    </div>
</div>
<script src="../static/scripts/axure/ios.js"></script>
<!-- jQuery -->
<script src="../static/js/jquery-2.1.0.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../static/js/bootstrap.js"></script>
<!-- AdminLTE App -->
<script src="../static/js/adminlte.min.js"></script>
<script src="../static/js/vue.js"></script>
<script src="../static/scripts/axure/ios.js"></script>


<script>

    var vue = new Vue({
        el: "#register",
        data: {
            userNickname:"",
            userGender:"",
            userPassword:"",
            userEmail:"",
            userPhone:"",
            userRole:"",
            schoolId:"",
            userNumber:"",
            userName:"",
            options:[
                {text:"管理员",value:"1"},
                {text:"教师",value:"2"},
                {text:"学生",value:"3"},
            ],
        },
        methods: {
            do_check: function () {
                if(this.userName === null || this.userName === undefined || this.userName === "") {
                    alert("用户名不能为空！");
                    return false;
                }
                if(this.userPassword === null || this.userPassword === undefined || this.userPassword === "") {
                    alert("密码不能为空！");
                    return false;
                }
                return true;
            },
            do_register: function () {
                let self = this;
                self.userRole = $("#account_type option:selected").val();
                if(!self.do_check()) {
                    return;
                }
                $.ajax({
                    type:"post",
                    url:"/system/register",
                    data:{
                        userNickname:self.userNickname,
                        userGender:self.userGender,
                        userPassword:self.userPassword,
                        userEmail:self.userEmail,
                        userPhone:self.userPhone,
                        userRole:self.userRole,
                        schoolId:self.schoolId,
                        userNumber:self.userNumber,
                        userName:self.userName,
                    },
                    success:function(res){
                        console.log(res);
                        if(res.code === "200"){
                           // localStorage.setItem("token",res.data.token);
                            localStorage.setItem("userNickname",self.userNickname);
                            localStorage.setItem("userGender",self.userGender);
                            localStorage.setItem("userPassword",self.userPassword);
                            localStorage.setItem("userEmail",self.userEmail);
                            localStorage.setItem("userPhone",self.userPhone);
                            localStorage.setItem("userRole",self.userRole);
                            localStorage.setItem("schoolId",self.schoolId);
                            localStorage.setItem("userNumber",self.userNumber);
                            localStorage.setItem("userName",self.userName);

                            window.location.href = "usercenter-info.html";
                        } else {
                            window.location.href = "main.html";
                            alert("注册失败！请检查输入。")
                        }
                    },
                    error:function(res){
                        console.log(res);
                        window.location.href = "main.html";
                        alert("出问题了！请刷新重试。")
                    }
                });
            },

        }
    })
</script>

</body>
</html>
