<!DOCTYPE html>
<html xmlns:v-on="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" >
    <title>我的课程详情- 慕学在线网</title>
    <link rel="stylesheet" type="text/css" href="/css/reset.css">
    <link rel="stylesheet" type="text/css" href="/css/animate.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/js/plugins/queryCity/css/cityLayout.css">

    <link rel="stylesheet" type="text/css" href="/css/lq.datetimepick.css"/>

    <script src="/js/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css">
    <script src="/js/bootstrap.js" type="text/javascript"></script>

</head>
<body>
<section class="headerwrap headerwrap2">
    <header>
        <div  class="header2 header">
            <div class="top">
                <div class="wp">
                    <div class="fl"><p>服务电话：<b>33333333</b></p></div>
                    <!--登录后跳转-->


                    <div class="personal">
                        <dl class="user fr">
                            <dd>bobby<img class="down fr" src="/images/top_down.png"/></dd>
                            <dt><img width="20" height="20" src="/media/image/2016/12/default_big_14.png"/></dt>
                        </dl>
                        <div class="userdetail">
                            <dl>
                                <dt><img width="80" height="80" src="/media/image/2016/12/default_big_14.png"/></dt>
                                <dd>
                                    <h2>django</h2>
                                    <p>bobby</p>
                                </dd>
                            </dl>
                            <div class="btn">
                                <a class="personcenter fl" href="usercenter-info.html">进入个人中心</a>
                                <a class="fr" href="/logout/">退出</a>
                            </div>
                        </div>
                    </div>
                    <a href="usercenter-message.html">
                        <div class="msg-num"><span id="MsgNum">0</span></div>
                    </a>


                </div>
            </div>

            <div class="middle">
                <div class="wp">
                    <a href="index.html"><img class="fl" src="/images/aike1.jpg"/></a>
                    <h1>我的爱课网 · 老师</h1>
                </div>
            </div>
        </div>
    </header>
</section>


<!--crumbs start-->

<section>
    <div class="wp">
        <ul  class="crumbs">
            <li><a href="index.html">首页</a>></li>
            <li><a href="/user/home/">个人中心</a>></li>
            <li>我的课程详情</li>
        </ul>
    </div>
</section>

<section id="user_course_notice_teacher">
    <div class="wp list personal_list">
        <div class="left">
            <img width="214" height="190" class="scrollLoading" src="/media/courses/2016/11/540e57300001d6d906000338-240-135_n0L8vbw.jpg"/><br/><br/>
            <ul>
                <li class="active2"><a href="usercenter-couese-notice.html">公告</a></li>
                <li ><a href="usercenter-couese-courseware.html">课件</a></li>
                <li ><a href="usercenter-couese-homework.html">作业</a></li>
                <li >
                    <a href="usercenter-couese-document.html" style="position: relative;">
                        文档
                    </a>
                </li>
            </ul>
        </div>


        <div class="right" >
            <div class="personal_des Releasecont">
                <div class="head">
                    <h1>公告</h1>
                    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#addNotice">
                        发布公告
                    </button>
                </div>
            </div>
            <div class="right" >

                <div class="personal_des permessage">

                    <div class="messagelist" v-for="courseNotice in noticeList">
                        <!--修改公告-->
                        <div class="modal fade" id="modifyNotice" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title" id="modifyNoticeLabel">修改公告</h4>
                                    </div>
                                    <div class="modal-body">
                                        <!--修改公告-->
                                        <div  class="issques clearfix js-form">
                                            <p class="perinform" style="color: grey">标&nbsp;&nbsp;题：<input type="text"  maxlength="10" class="modifyTitle" v-model="courseForm.noticeTitle"></p>
                                            <p style="color: grey">内&nbsp;&nbsp;容：
                                            <div class="wgt-ipt-wrap pub-editor-wrap " >
                                                <textarea  class="" placeholder="" class="modifyContent" v-model="courseForm.noticeContent"></textarea>
                                            </div>
                                            </p>

                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                        <button type="button" class="btn btn-primary" v-on:click="modifyNotice(courseNotice)">修改公告</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div  class="messages">
                            <div class="fr">
                                <label style="font-weight: bold;font-size: 15px" >{{courseNotice.noticeTitle}}</label>
                                <p>
                                    {{courseNotice.noticeContent}}
                                </p>
                                <div class="top"><span class="fl time">{{courseNotice.publishTime | formatDate}}</span></div>
                                <div class="buy btn" data-favid="14" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#modifyNotice" @click="click(courseNotice)"><a style="color: grey" >修改公告</a></div>
                                <div class="buy btn" data-favid="14" v-on:click="deleteNotice(courseNotice)"><a style="color: grey">删除公告</a></div>
                            </div>


                        </div>
                    </div>


                    <div class="pageturn pagerright">
                        <ul class="pagelist">
                            <li class="active"><a href="?page=1">1</a></li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>


    </div>

    <!--发布公告-->
    <div class="modal fade" id="addNotice" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addNoticeLabel">发布公告</h4>
                </div>
                <div class="modal-body">

                    <div  class="issques clearfix js-form">
                        <p class="perinform" style="color: grey">标&nbsp;&nbsp;题：<input type="text"  maxlength="10" id="title"></p>
                        <p style="color: grey">内&nbsp;&nbsp;容：
                        <div class="wgt-ipt-wrap pub-editor-wrap " >
                            <textarea  class="" placeholder="" id="content"></textarea>
                        </div>
                        </p>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" v-on:click="addNotice()">发布公告</button>
                </div>
            </div>
        </div>
    </div>





</section>




<!--sidebar start-->
<section>
    <ul class="sidebar">
        <li class="qq">
            <a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=2023525077&site=qq&menu=yes"></a>
        </li>
        <li class="totop"></li>
    </ul>
</section>
<!--sidebar end-->
<!--header start-->


<div class="dialog" id="jsDialog">
    <div class="successbox dialogbox" id="jsSuccessTips">
        <h1>成功提交</h1>
        <div class="close jsCloseDialog"><img src="/images/dig_close.png"/></div>
        <div class="cont">
            <h2>您的需求提交成功！</h2>
            <p></p>
        </div>
    </div>
    <!--提示弹出框-->
    <div class="bidtips dialogbox promptbox" id="jsComfirmDialig">
        <h1>确认提交</h1>
        <div class="close jsCloseDialog"><img src="/images/dig_close.png"/></div>
        <div class="cont">
            <h2>您确认提交吗？</h2>
            <dd class="autoTxtCount">
                <div class="button">
                    <input type="button" class="fl half-btn" value="确定" id="jsComfirmBtn"/>
                    <span class="fr half-btn jsCloseDialog">取消</span>
                </div>
            </dd>
        </div>
    </div>
    <div class="resetpwdbox dialogbox" id="jsResetDialog">
        <h1>修改密码</h1>
        <div class="close jsCloseDialog"><img src="/images/dig_close.png"/></div>
        <div class="cont">
            <form id="jsResetPwdForm" autocomplete="off">
                <div class="box">
                    <span class="word2" >新&nbsp;&nbsp;密&nbsp;&nbsp;码</span>
                    <input type="password" id="pwd" name="password1" placeholder="6-20位非中文字符"/>
                </div>
                <div class="box">
                    <span class="word2" >确定密码</span>
                    <input type="password" id="repwd" name="password2" placeholder="6-20位非中文字符"/>
                </div>
                <div class="error btns" id="jsResetPwdTips"></div>
                <div class="button">
                    <input id="jsResetPwdBtn" type="button" value="提交" />
                </div>
                <input type='hidden' name='csrfmiddlewaretoken' value='DaP7IUKm9FA9nELA9YUlYYWpyIDdCiIP' />
                <input type='hidden' name='csrfmiddlewaretoken' value='799Y6iPeEDNSGvrTu3noBrO4MBLv6enY' />
            </form>
        </div>
    </div>
    <div class="dialogbox changeemai1 changephone" id="jsChangeEmailDialog">
        <h1>修改邮箱</h1>
        <div class="close jsCloseDialog"><img src="/images/dig_close.png"/></div>
        <p>请输入新的邮箱地址</p>
        <form id="jsChangeEmailForm" autocomplete="off">
            <div class="box">
                <input class="fl change_email" name="email" id="jsChangeEmail" type="text" placeholder="输入重新绑定的邮箱地址">
            </div>
            <div class="box">
                <input class="fl email_code" type="text" id="jsChangeEmailCode" name="code" placeholder="输入邮箱验证码">
                <input class="getcode getting" type="button" id="jsChangeEmailCodeBtn" value="获取验证码">
            </div>
            <div class="error btns change_email_tips" id="jsChangeEmailTips" >请输入...</div>
            <div class="button">
                <input class="changeemai_btn" id="jsChangeEmailBtn" type="button" value="完成"/>
            </div>
            <input type='hidden' name='csrfmiddlewaretoken' value='DaP7IUKm9FA9nELA9YUlYYWpyIDdCiIP' />
            <input type='hidden' name='csrfmiddlewaretoken' value='799Y6iPeEDNSGvrTu3noBrO4MBLv6enY' />
        </form>
    </div>

    <div  class="noactivebox dialogbox" id="jsUnactiveForm" >
        <h1>邮件验证提示</h1>
        <div class="close jsCloseDialog"><img src="/images/dig_close.png"/></div>
        <div class="center">
            <img src="images/send.png"/>
            <p>我们已经向您的邮箱<span class="green" id="jsEmailToActive">12@13.com</span>发送了邮件，<br/>为保证您的账号安全，请及时验证邮箱</p>
            <p class="a"><a class="btn" id="jsGoToEmail" target="_blank" href="http://mail.qq.com">去邮箱验证</a></p>
            <p class="zy_success upmove"></p>
            <p style="display: none;" class="sendE2">没收到，您可以查看您的垃圾邮件和被过滤邮件，也可以再次发送验证邮件（<span class="c5c">60s</span>）</p>
            <p class="sendE">没收到，您可以查看您的垃圾邮件和被过滤邮件，<br/>也可以<span class="c5c green" id="jsSenEmailAgin" style="cursor: pointer;">再次发送验证邮件</span></p>
        </div>
    </div>
    <div class="resetpassbox dialogbox" id="jsSetNewPwd">
        <h1>重新设置密码</h1>
        <div class="close jsCloseDialog"><img src="../images/dig_close.png"/></div>
        <p class="green">请输入新密码</p>
        <form id="jsSetNewPwdForm">
            <div class="box">
                <span class="word2">密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码</span>
                <input type="password" name="password" id="jsResetPwd" placeholder="请输入新密码"/>
            </div>
            <div class="box">
                <span class="word2">确&nbsp;认&nbsp;密&nbsp;码</span>
                <input type="password" name="password2" id="jsResetPwd2" placeholder="请再次输入新密码"/>
            </div>
            <div class="box">
                <span class="word2">验&nbsp;&nbsp;证&nbsp;&nbsp;码</span>
                <input type="text" name="code" id="jsResetCode" placeholder="请输入手机验证码"/>
            </div>
            <div class="error btns" id="jsSetNewPwdTips"></div>
            <div class="button">
                <input type="hidden" name="mobile" id="jsInpResetMobil" />
                <input id="jsSetNewPwdBtn" type="button" value="提交" />
            </div>
            <input type='hidden' name='csrfmiddlewaretoken' value='DaP7IUKm9FA9nELA9YUlYYWpyIDdCiIP' />
        </form>
    </div>
    <div class="forgetbox dialogbox">
        <h1>忘记密码</h1>
        <div class="close jsCloseDialog"><img src="/images/dig_close.png"/></div>
        <div class="cont">
            <form id="jsFindPwdForm" autocomplete="off">
                <input type='hidden' name='csrfmiddlewaretoken' value='DaP7IUKm9FA9nELA9YUlYYWpyIDdCiIP' />
                <div class="box">
                    <span class="word2" >账&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;号</span>
                    <input type="text" id="account" name="account" placeholder="手机/邮箱"/>
                </div>
                <div class="box">
                    <span class="word3">验证码</span>
                    <input autocomplete="off" class="form-control-captcha find-password-captcha" id="find-password-captcha_1" name="captcha_f_1" placeholder="请输入验证码" type="text" />
                    <input class="form-control-captcha find-password-captcha" id="find-password-captcha_0" name="captcha_f_0" placeholder="请输入验证码" type="hidden" value="5f3c00e47fb1be12d2fd15b9a860711597721b3f" /> &nbsp;
                    <!--                    <img src="/captcha/image/5f3c00e47fb1be12d2fd15b9a860711597721b3f/" alt="captcha" class="captcha" />-->
                </div>
                <div class="error btns" id="jsForgetTips"></div><!--忘记密码错误-->
                <div class="button">
                    <input type="hidden" name="sms_type" value="1">
                    <input id="jsFindPwdBtn" type="button" value="提交" />
                </div>
            </form>
        </div>
    </div>
</div>
<div class="bg" id="dialogBg"></div>



<script src="js/vue.js"></script>
<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<script>
    var courseNotice = new Vue({
        el: '#user_course_notice_teacher',
        data: {
            noticeList:[],
            courseForm:{
                noticeTitle:'',
                noticeContent:''
            }
        },
        methods: {
            getNoticeList(){
                let that = this;
                $.ajax({
                    type: "POST",
                    url:"/student/getNoticeList",
                    data:{
                        'courseId':1,
                    },
                    success(res) {
                        console.log(res)
                        that.noticeList = res.data;
                        // console.log(this.noticeList)
                    },
                    error(res){
                        console.log(res)
                    }

                });
            },

            addNotice() {
                let that = this;
                var title = $("#title").val();
                var content = $("#content").val();
                $.ajax({
                    type: "POST",
                    url: "/teacher/addNotice",
                    data: {
                        'courseId': 1,
                        'userId': 2,
                        'noticeTitle': title,
                        'noticeContent': content
                    },
                    success(res) {
                        console.log(res)
                        if (res.code == 200) {
                            alert("插入成功！");
                        } else {
                            alert(res.data.msg);
                        }
                        //that.noticeList = res.data;
                        // console.log(this.noticeList)
                    },
                    error(res) {
                        console.log(res)
                    }
                });
            },
            click(notice) {
                console.log(notice)
                this.courseForm = notice;
            },

            modifyNotice(notice){
                console.log(notice)
                let that = this;
                // var modifyTitle=$("#modifyTitle").val();
                // var modifyContent=$("#modifyContent").val();
                $.ajax({
                    type:"POST",
                    url:"/teacher/modifyNotice",
                    data:{
                        'noticeId': notice.noticeId,
                        'courseId':notice.courseId ,
                        'userId': notice.userId ,
                        'noticeTitle':modifyTitle,
                        'noticeContent':modifyContent
                    },
                    success(res) {
                        console.log(res)
                        if(res.code==200)
                        {
                            alert("修改成功！");
                        }
                        else{
                            alert(res.data.msg);
                        }
                        //that.noticeList = res.data;
                        // console.log(this.noticeList)
                    },
                    error(res){
                        console.log(res)
                    }
                })
            },


            deleteNotice(notice) {
                let that = this;
                $.ajax({
                    type: "POST",
                    url: "/teacher/deleteNotice",
                    data: {
                        'noticeId': notice.noticeId,

                    },
                    success(res) {
                        console.log(res)
                        //that.noticeList = res.data;
                        // console.log(this.noticeList)
                        if (res.code == 210) {
                            alert("删除失败！");
                        } else {
                            alert("删除成功！");
                        }
                    },
                    error(res) {
                        console.log(res)
                    }
                });
            },

        },
        filters: {
            formatDate: function (value) {
                let date = new Date(value);
                let y = date.getFullYear();
                let MM = date.getMonth() + 1;
                MM = MM < 10 ? ('0' + MM) : MM;
                let d = date.getDate();
                d = d < 10 ? ('0' + d) : d;
                let h = date.getHours();
                h = h < 10 ? ('0' + h) : h;
                let m = date.getMinutes();
                m = m < 10 ? ('0' + m) : m;
                let s = date.getSeconds();
                s = s < 10 ? ('0' + s) : s;
                return y + '-' + MM + '-' + d + ' ' + h + ':' + m + ':' + s;
            }

        },



        created(){

        },
        mounted() {
            this.getNoticeList();
        }

    });
</script>
</body>
</html>
