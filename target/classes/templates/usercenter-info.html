<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" >
	<title>个人信息- 慕学在线网</title>
	<link rel="stylesheet" type="text/css" href="/css/reset.css">
	<link rel="stylesheet" type="text/css" href="/css/animate.css">
	<link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/js/plugins/queryCity/css/cityLayout.css">
    
    <link rel="stylesheet" type="text/css" href="/css/lq.datetimepick.css"/>

    <script src="../js/jquery.min.js" type="text/javascript"></script>
    <script src="../js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>


    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>
<section id="usercenter_info">
<section class="headerwrap headerwrap2">
    <header>
		<div  class="header2 header">
            <nav class="navbar navbar-default" role="navigation">
                <div class="container-fluid" class="container" >
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">爱课网</a>
                    </div>
                    <ul class="nav navbar-nav navbar-right" >
                        <li class="dropdown" v-if="userRole==2">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <span class="glyphicon glyphicon-user" >老师·{{userNickname}}</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="usercenter-mycourse-teacher.html">个人中心</a></li>
                                <li><a @click="logout()">退出</a></li>
                            </ul>
                        </li>
                        <li class="dropdown" v-if="userRole==3">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <span class="glyphicon glyphicon-user" >学生·{{userNickname}}</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="usercenter-mycourse.html">个人中心</a></li>
                                <li><a @click="logout()">退出</a></li>
                            </ul>
                        </li>
                    </ul>

                </div>
            </nav>
            
    <div class="middle">
        <div class="wp">
            <a href="index.html"><img class="fl" src="/images/aike1.jpg"/></a>
            <h1>我的爱课网 · 学生</h1>
        </div>
    </div>
			</div>
    </header>
</section>



<!--crumbs start-->

    <section>
        <div class="wp">
            <ul  class="crumbs">
                <li><a href="index.html">首页</a>></li>
                <li><a href="/user/home/">个人中心</a>></li>
                <li>个人信息</li>
            </ul>
        </div>
    </section>

    <section>
        <div class="wp list personal_list">
            <div class="left">
                <ul>
                    <li class="active2"><a href="usercenter-info.html">个人资料</a></li>
                    <li ><a href="usercenter-mycourse.html">我的课程</a></li>
                    <li ><a href="usercenter-fav-course.html">我的收藏</a></li>
                </ul>
            </div>


            <div class="right">
                <div class="personal_des ">
                    <div class="head" style="border:1px solid #eaeaea;">
                        <h1 style="font-size: 22px">个人信息</h1>
                    </div>
                    <div class="inforcon">
                        <div class="left" style="width:242px;">
                            <iframe id='frameFile' name='frameFile' style='display: none;'></iframe>
                            <form class="clearfix" id="jsAvatarForm" enctype="multipart/form-data" autocomplete="off" method="post" action="/users/image/upload/" target='frameFile'>
                                <label class="changearea" for="avatarUp">
                            <span id="avatardiv" class="pic">
                                <img width="100" height="100" class="js-img-show" id="avatarShow" src="/media/image/2016/12/default_big_14.png"/>
                            </span>
                                    <span class="fl upload-inp-box" style="margin-left:70px;">
                                <span class="button btn-green btn-w100" id="jsAvatarBtn">修改头像</span>
                                <input type="file" name="image" id="avatarUp" class="js-img-up"/>
                            </span>
                                </label>
                                <input type='hidden' name='csrfmiddlewaretoken' value='799Y6iPeEDNSGvrTu3noBrO4MBLv6enY' />
                            </form>
                            <div style="border-top:1px solid #eaeaea;margin-top:30px;">
                                <a class="button btn-green btn-w100" id="jsUserResetPwd" style="margin:80px auto;width:100px;">修改密码</a>
                            </div>
                        </div>
                        <form class="perinform" id="jsEditUserForm" autocomplete="off">
                            <ul class="right">
                                <li>昵&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;称：
                                    <input type="text" name="nick_name" id="nick_name" value="django" maxlength="10">
                                    <i class="error-tips"></i>
                                </li>
                                <li>生&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日：
                                    <input type="text" id="birth_day" name="birday" value="2009年9月2日" readonly="readonly"/>
                                    <i class="error-tips"></i>
                                </li>
                                <li>性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别：
                                    <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio"  name="gender" value="male" >男</label>
                                    <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="gender" value="female" checked="checked">女</label>
                                </li>
                                <li class="p_infor_city">地&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;址：
                                    <input type="text" name="address" id="address" placeholder="请输入你的地址" value="我来自火星" maxlength="10">
                                    <i class="error-tips"></i>
                                </li>
                                <li>手&nbsp;&nbsp;机&nbsp;&nbsp;号：
                                    <input type="text" name="mobile" id="mobile" placeholder="请输入你的手机号码" value="" maxlength="10">
                                </li>
                                <li>邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箱：
                                    <input class="borderno" type="text" name="email" readonly="readonly" value="projectsedu@sina.com"/>
                                    <span class="green changeemai_btn">[修改]</span>
                                </li>
                                <li class="button heibtn">
                                    <input type="button" id="jsEditUserBtn" value="保存">
                                </li>
                            </ul>
                            <input type='hidden' name='csrfmiddlewaretoken' value='799Y6iPeEDNSGvrTu3noBrO4MBLv6enY' />
                        </form>
                    </div>
                </div>
            </div>


        </div>
    </section>


</section>


<script src="js/vue.js"></script>
<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<!-- jQuery -->
<script src="/js/request.js"></script>
<script src="/js/jquerySession.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script><!-- Bootstrap 4 -->
<script src="/js/adminlte.min.js"></script><!-- AdminLTE App -->
<script src="/js/bs-custom-file-input.min.js"></script><!-- bs-custom-file-input -->
<script src="/js/sweetalert2.min.js"></script>
<script src="/js/requestParam.js"></script>


<script>
    var info = new Vue({
        el: '#usercenter_info',
        data: {
            logoutData:{
                id:null,
                userType:null
            },
            isTeacher:false,
            userName:null,
            courseName:null,
            courseId:1,

            userEmail: "",
            original_password: "",
            is_old_valid: true,
            retype_password: "",
            is_retype_valid: true,
            password: "",
            is_password_valid: true,
            userNumber: "",
            userRole: "",
            userId: "",
            userNickname:"",
            userGender:"",

        },
        methods: {

            init(type){
                let that = this;
                console.log(type);
                switch(type){
                    case "2"://教师
                        that.userNickname = localStorage.getItem("userNickname");
                        that.logoutData.id = localStorage.getItem("userId");
                        that.logoutData.userType = localStorage.getItem("userRole");
                        that.courseName = localStorage.getItem("courseName");
                        that.isTeacher = true;
                        break;
                    case "3"://学生
                        that.userNickname = localStorage.getItem("userNickname");
                        that.logoutData.id = localStorage.getItem("userRole");
                        that.courseName = localStorage.getItem("courseName");
                        that.logoutData.userType = localStorage.getItem("userType");
                        that.isTeacher = false;
                        break;
                    case "1":
                        //window.location.href = requestHref.login;//跳转到登陆页面
                        break;
                    default:
                    //window.location.href = requestHref.login;//跳转到登陆页面
                }
            },

            logout(){
                let that = this;
                request({
                    type:requestType.post,
                    url:requestUrl.logout,
                    data:this.logoutData,
                }).then(
                    function success(res){
                        localStorage.clear();
                        console.log(res);
                        console.log(res.code);
                        window.location.href="/blackboard/";
                    },
                    function error(res){
                        console.log(res)
                    }
                );
            },




        },

        created(){

            this.init(localStorage.getItem("userRole"));
        },
        mounted() {
            this.getCollectionCourseList();

            this.userName = JSON.parse(localStorage.getItem("userName"));
            this.userEmail = localStorage.getItem("userEmail");
            this.userNumber = localStorage.getItem("userNumber");
            this.userNickname = localStorage.getItem("userNickname");
            this.userRole = JSON.parse(localStorage.getItem("userRole"));
            this.userId = parseInt(localStorage.getItem("userId"));
        }

    });
</script>


</body>
</html>
